{"inkVersion":20,"root":[["\n",{"->":"greeting"},["done",{"#f":5,"#n":"g-0"}],null],"done",{"greeting":[["^Диалог пошел","\n","ev",{"x()":"get_affinity_here"},"/ev",{"temp=":"currentAffinity"},"\n","ev","str","^external_test","/str",{"x()":"get_quest_state","exArgs":1},"/ev",{"temp=":"questState"},"\n","ev","str","^external_test","/str",{"x()":"check_if_quest_has_been_taken","exArgs":1},"/ev",{"temp=":"isTaken"},"\n","ev","str","^Dialogue Test","/str",{"x()":"get_affinity_by_name","exArgs":1},"/ev",{"temp=":"currentAffinityByName"},"\n","ev","str","^yellow","/str",{"x()":"set_color","exArgs":1},"pop","/ev","\n","ev","str","^red","/str",{"x()":"set_color","exArgs":1},"out","/ev","\n","ev",{"VAR?":"questState"},{"x()":"debug_log","exArgs":1},"pop","/ev","\n",["ev",{"VAR?":"questState"},"str","^null","/str","==","/ev",{"->":".^.b","c":true},{"b":["\n","ev","str","^Дай карту","/str","/ev",{"*":".^.c-0","flg":4},{"->":".^.^.^.57"},{"c-0":["\n","ev","str","^external_test","/str",{"x()":"add_quest","exArgs":1},"pop","/ev","\n","^Даю карту","\n",{"->":"greeting"},{"#f":5}]}]}],["ev",{"VAR?":"questState"},"str","^Active","/str","==","/ev",{"->":".^.b","c":true},{"b":["\n","ev","str","^Выполнить Квест","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Зафейлить Квест","/str","/ev",{"*":".^.c-1","flg":4},{"->":".^.^.^.57"},{"c-0":["\n","ev","str","^external_talk_success","/str",{"x()":"invoke_dialogue_event","exArgs":1},"pop","/ev","\n","^Выполнился","\n",{"->":"greeting"},{"#f":5}],"c-1":["\n","ev","str","^external_talk_fail","/str",{"x()":"invoke_dialogue_event","exArgs":1},"pop","/ev","\n","^Зафейлился","\n",{"->":"greeting"},{"#f":5}]}]}],["ev",{"VAR?":"questState"},"str","^Completed","/str","==",{"VAR?":"questState"},"str","^RewardUncollected","/str","==","||","/ev",{"->":".^.b","c":true},{"b":["\n","^Похоже ты уже выполнил квест","\n",{"->":".^.^.^.57"},null]}],["ev",{"VAR?":"questState"},"str","^Failed","/str","==","/ev",{"->":".^.b","c":true},{"b":["\n","^Похоже ты зафейлил квест, гандон","\n",{"->":".^.^.^.57"},null]}],"nop","\n","ev","str","^Affinity + 10","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Покинуть диалог","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n","ev",5,{"x()":"add_affinity_here","exArgs":1},"pop","/ev","\n","ev","str","^Dialogue Test","/str",5,{"x()":"add_affinity","exArgs":2},"pop","/ev","\n",{"->":".^.^.^"},{"#f":5}],"c-1":["\n","^Конец диалога","\n","end",{"#f":5}]}],{"#f":1}],"global decl":["ev",0,{"VAR=":"affinity"},"/ev","end",null],"#f":1}],"listDefs":{}}